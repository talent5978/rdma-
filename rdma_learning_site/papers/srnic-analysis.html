<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRNIC: A Scalable Architecture for RDMA NICs - 论文解读</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/paper.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-network-wired"></i>
                <span>RDMA研究平台</span>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html">首页</a></li>
                <li><a href="../index.html#papers">核心论文</a></li>
                <li><a href="../index.html#concepts">基础概念</a></li>
                <li><a href="../index.html#resources">学习资源</a></li>
            </ul>
        </div>
    </nav>

    <div class="paper-header-section">
        <div class="container">
            <div class="paper-breadcrumb">
                <a href="../index.html">首页</a> <i class="fas fa-chevron-right"></i>
                <a href="../index.html#papers">核心论文</a> <i class="fas fa-chevron-right"></i>
                <span>SRNIC架构分析</span>
            </div>
            <h1 class="paper-main-title">SRNIC: A Scalable Architecture for RDMA NICs</h1>
            <div class="paper-meta">
                <span class="paper-venue"><i class="fas fa-university"></i> NSDI 2023</span>
                <span class="paper-category"><i class="fas fa-tag"></i> 硬件架构</span>
                <span class="paper-impact"><i class="fas fa-chart-line"></i> 高影响力</span>
            </div>
        </div>
    </div>

    <div class="paper-content">
        <div class="container">
            <div class="content-layout">
                <aside class="paper-toc">
                    <h3>目录导航</h3>
                    <ul>
                        <li><a href="#abstract">论文摘要</a></li>
                        <li><a href="#contributions">核心贡献</a></li>
                        <li><a href="#technical-details">技术细节</a></li>
                        <li><a href="#experiments">实验结果</a></li>
                        <li><a href="#understanding">我的理解</a></li>
                        <li><a href="#significance">学术意义</a></li>
                    </ul>
                </aside>

                <main class="paper-main-content">
                    <div class="content-section" id="abstract">
                        <h2><i class="fas fa-file-alt"></i> 论文摘要</h2>
                        <div class="abstract-box">
                            <p>SRNIC提出了一种全新的可扩展RDMA NIC架构，通过协议与架构的协同设计，解决了传统RDMA NIC在连接可扩展性方面的根本性瓶颈。该架构在保持商业RDMA
                                NIC高性能和低CPU开销的同时，实现了对大规模有损网络的支持，并将连接可扩展性提升了18倍。</p>

                            <div class="paper-preview-section">
                                <button class="preview-btn" onclick="openPaperPreview()">
                                    <i class="fas fa-file-pdf"></i>
                                    查看论文原文
                                </button>
                            </div>
                        </div>

                        <div class="key-metrics">
                            <div class="metric-item">
                                <span class="metric-value">18x</span>
                                <span class="metric-label">可扩展性提升</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-value">10K</span>
                                <span class="metric-label">支持QP数量</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-value">97Gbps</span>
                                <span class="metric-label">线速吞吐量</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-value">3.3μs</span>
                                <span class="metric-label">超低延迟</span>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="contributions">
                        <h2><i class="fas fa-lightbulb"></i> 核心贡献</h2>

                        <div class="contribution-grid">
                            <div class="contribution-card">
                                <div class="contribution-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <h3>问题识别</h3>
                                <p><strong>双重可扩展性瓶颈：</strong></p>
                                <ul>
                                    <li><strong>网络可扩展性：</strong>PFC依赖导致的网络管理风险和扩展限制</li>
                                    <li><strong>连接可扩展性：</strong>QP数量超过硬件缓存容量时性能急剧下降</li>
                                </ul>
                                <div class="problem-stats">
                                    <p>📊 Mellanox CX-6: QP从128增至16384时，吞吐量下降46% (97→52 Gbps)</p>
                                    <p>🔍 根本原因：频繁的缓存未命中和上下文切换</p>
                                </div>
                            </div>

                            <div class="contribution-card">
                                <div class="contribution-icon">
                                    <i class="fas fa-cogs"></i>
                                </div>
                                <h3>架构创新</h3>
                                <p><strong>三层硬件架构设计：</strong></p>
                                <ul>
                                    <li><strong>DMA引擎层：</strong>QP调度器，支持数万个QP的高效调度</li>
                                    <li><strong>传输层：</strong>拥塞控制模块和硬件重传模块</li>
                                    <li><strong>基础NIC层：</strong>以太网NIC基本功能</li>
                                </ul>
                                <div class="innovation-highlight">
                                    <p>💡 <strong>快慢路径分离：</strong>硬件处理顺序数据包，软件处理乱序数据包</p>
                                </div>
                            </div>

                            <div class="contribution-card">
                                <div class="contribution-icon">
                                    <i class="fas fa-memory"></i>
                                </div>
                                <h3>内存优化</h3>
                                <p><strong>两大关键优化：</strong></p>
                                <ul>
                                    <li><strong>无缓存QP调度器：</strong>避免WQE片上缓存，采用"取即丢弃"策略</li>
                                    <li><strong>无内存选择重传：</strong>将重传状态卸载到主机内存</li>
                                </ul>
                                <div class="memory-breakdown">
                                    <p>📦 片上内存分配 (总计4.4MB)：</p>
                                    <ul>
                                        <li>QPC表：2.3MB (10K QPs × 210B)</li>
                                        <li>MTT缓存：1.2MB</li>
                                        <li>接收缓冲区：0.6MB</li>
                                        <li>SQ调度器：0.3MB</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="technical-details">
                        <h2><i class="fas fa-microchip"></i> 技术细节</h2>

                        <div class="tech-detail-tabs">
                            <div class="tab-buttons">
                                <button class="tab-btn active" data-tab="architecture">整体架构</button>
                                <button class="tab-btn" data-tab="qp-scheduler">QP调度器</button>
                                <button class="tab-btn" data-tab="selective-repeat">选择重传</button>
                                <button class="tab-btn" data-tab="memory-mgmt">内存管理</button>
                            </div>

                            <div class="tab-content">
                                <div id="architecture" class="tab-panel active">
                                    <h3>SRNIC整体架构</h3>
                                    <div class="architecture-diagram">
                                        <div class="arch-layer software">
                                            <h4>软件层</h4>
                                            <div class="component">RNIC驱动程序</div>
                                            <div class="component">软件重传模块</div>
                                            <div class="component">应用程序</div>
                                        </div>
                                        <div class="arch-layer hardware">
                                            <h4>硬件层</h4>
                                            <div class="hw-sublayer">
                                                <strong>DMA引擎层</strong>
                                                <div class="component">QP调度器</div>
                                                <div class="component">数据传输器</div>
                                            </div>
                                            <div class="hw-sublayer">
                                                <strong>传输层</strong>
                                                <div class="component">拥塞控制模块(DCTCP)</div>
                                                <div class="component">硬件重传模块</div>
                                            </div>
                                            <div class="hw-sublayer">
                                                <strong>基础NIC层</strong>
                                                <div class="component">100GE MAC</div>
                                                <div class="component">RoCEv2处理</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="design-principles">
                                        <h4>设计原则</h4>
                                        <ol>
                                            <li><strong>硬件优先：</strong>尽可能将RDMA功能保留在硬件中以实现高性能</li>
                                            <li><strong>高效丢包处理：</strong>消除对PFC的依赖，支持大规模有损网络</li>
                                            <li><strong>最小化片上内存：</strong>在有限内存下支持大量高性能QP</li>
                                        </ol>
                                    </div>
                                </div>

                                <div id="qp-scheduler" class="tab-panel">
                                    <h3>无缓存QP调度器</h3>

                                    <div class="architecture-diagram">
                                        <h4><i class="fas fa-sitemap"></i> QP调度器架构图</h4>
                                        <div class="scheduler-diagram">
                                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDgwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjZjhmYWZjIi8+CjwhLS0gSG9zdCBNZW1vcnkgLS0+CjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjE1MCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzNiODJmNiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjx0ZXh0IHg9IjEyNSIgeT0iNzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMxZTJhM2IiPkhvc3QgTWVtb3J5PC90ZXh0Pgo8dGV4dCB4PSI2MCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM2NDc0OGIiPldRRSBRdWV1ZXM8L3RleHQ+Cjx0ZXh0IHg9IjYwIiB5PSIxMjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzY0NzQ4YiI+U1E6IDEwSyBxdWV1ZXM8L3RleHQ+Cjx0ZXh0IHg9IjYwIiB5PSIxNDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzY0NzQ4YiI+UlE6IDEwSyBxdWV1ZXM8L3RleHQ+CjwhLS0gU1JJQyBOaWMgLS0+CjxyZWN0IHg9IjMwMCIgeT0iNTAiIHdpZHRoPSI0NTAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMxMGI5ODEiIHN0cm9rZS13aWR0aD0iMiIvPgo8dGV4dCB4PSI0NzUiIHk9IjcwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5TUlJJQyBOaWM8L3RleHQ+CjwhLS0gUUMgU2NoZWR1bGVyIC0tPgo8cmVjdCB4PSIzMjAiIHk9IjEwMCIgd2lkdGg9IjE4MCIgaGVpZ2h0PSI0MCIgZmlsbD0iI2VjZmRmNSIgc3Ryb2tlPSIjMTBiOTgxIiBzdHJva2Utd2lkdGg9IjIiLz4KPHRleHQgeD0iNDEwIiB5PSIxMjUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMxZTJhM2IiPlFQIFNjaGVkdWxlcjwvdGV4dD4KPCEtLSBEb29yYmVsbCAtLT4KPHJlY3QgeD0iMzIwIiB5PSIxNjAiIHdpZHRoPSIxODAiIGhlaWdodD0iNDAiIGZpbGw9IiNmZWYzYzciIHN0cm9rZT0iI2Y1OWUwYiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjx0ZXh0IHg9IjQxMCIgeT0iMTg1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5Eb29yYmVsbDwvdGV4dD4KPCEtLSBEYXRhIFRyYW5zbWlzc2lvbiAtLT4KPHJlY3QgeD0iMzIwIiB5PSIyMjAiIHdpZHRoPSIxODAiIGhlaWdodD0iNDAiIGZpbGw9IiNmMGY5ZmYiIHN0cm9rZT0iIzNiODJmNiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjx0ZXh0IHg9IjQxMCIgeT0iMjQ1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5EYXRhIFRyYW5zbWlzc2lvbjwvdGV4dD4KPCEtLSBBcnJvd3MgLS0+CjxwYXRoIGQ9Ik0yMDAgMjAwIEwyOTUgMjAwIiBzdHJva2U9IiM2NDc0OGIiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIgYXJyb3ctaGVhZD0idHJpYW5nbGUiLz4KPHRleHQgeD0iMjQwIiB5PSIxOTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzY0NzQ4YiI+RE1BPC90ZXh0Pgo8IS0tIE5ldHdvcmsgLS0+CjxyZWN0IHg9IjYwMCIgeT0iNTAiIHdpZHRoPSIxNTAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiNlZjQ0NDQiIHN0cm9rZS13aWR0aD0iMiIvPgo8dGV4dCB4PSI2NzUiIHk9IjcwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5OZXR3b3JrPC90ZXh0Pgo8cGF0aCBkPSJNNzUwIDIwMCBMNjAwIDIwMCIgc3Ryb2tlPSIjNjQ3NDhiIiBzdHJva2Utd2lkdGg9IjMiIGZpbGw9Im5vbmUiIGFycm93LWhlYWQ9InRyaWFuZ2xlIi8+Cjx0ZXh0IHg9IjY2MCIgeT0iMTkwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiM2NDc0OGIiPjEwMEdicHM8L3RleHQ+Cjwvc3ZnPgo="
                                                alt="SRNIC QP调度器架构"
                                                style="width: 100%; max-width: 800px; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                        </div>
                                        <p class="diagram-caption">图：SRNIC无缓存QP调度器架构，展示从主机内存到网络的数据流</p>
                                    </div>

                                    <div class="scheduler-features">
                                        <div class="feature-box">
                                            <h4><i class="fas fa-fast-forward"></i> 取即丢弃策略</h4>
                                            <p>避免WQE的片上缓存，每次从主机内存直接获取WQE并立即处理，无需在片上存储大量工作队列条目。</p>
                                        </div>
                                        <div class="feature-box">
                                            <h4><i class="fas fa-clock"></i> 批量DMA</h4>
                                            <p>DMA引擎批量获取WQE和消息数据，有效隐藏PCIe往返延迟，提升整体处理效率。</p>
                                        </div>
                                        <div class="feature-box">
                                            <h4><i class="fas fa-list"></i> 精简调度队列</h4>
                                            <p>调度器使用19.5KB的精简调度队列即可支持10K个SQs的轮询调度，大幅减少内存占用。</p>
                                        </div>
                                    </div>
                                    <div class="scheduler-workflow">
                                        <h4>调度工作流程</h4>
                                        <ol>
                                            <li>EMUX模块管理调度事件并更新QPC状态</li>
                                            <li>只调度活跃且有信用额度的SQs</li>
                                            <li>使用轮询策略确保公平性</li>
                                            <li>批量获取WQE隐藏PCIe延迟</li>
                                        </ol>
                                    </div>
                                </div>

                                <div id="selective-repeat" class="tab-panel">
                                    <h3>无内存选择重传</h3>

                                    <div class="architecture-diagram">
                                        <h4><i class="fas fa-sitemap"></i> 选择重传机制图</h4>
                                        <div class="retransmission-diagram">
                                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDgwMCA1MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiBmaWxsPSIjZjhmYWZjIi8+CjwhLS0gU2VuZGVyIC0tPgo8cmVjdCB4PSI1MCIgeT0iNTAiIHdpZHRoPSIyMDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMzYjgyZjYiIHN0cm9rZS13aWR0aD0iMiIvPgo8dGV4dCB4PSIxNTAiIHk9IjcwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5TZW5kZXI8L3RleHQ+CjwhLS0gSGFyZHdhcmUgUmV0cmFuc21pc3Npb24gLS0+CjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjZWNmZGY1IiBzdHJva2U9IiMxMGI5ODEiIHN0cm9rZS13aWR0aD0iMiIvPgo8dGV4dCB4PSIxNDAiIHk9IjE0NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlMmEzYiI+SGFyZHdhcmU8L3RleHQ+Cjx0ZXh0IHg9IjE0MCIgeT0iMTYwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5SZXRyYW5zbWlzc2lvbjwvdGV4dD4KPCEtLSBTZXF1ZW5jZSBudW1iZXJzIC0tPgo8dGV4dCB4PSI2MCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM2NDc0OGIiPkRhdGEgUGFja2V0czo8L3RleHQ+Cjx0ZXh0IHg9IjYwIiB5PSIyMjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzY0NzQ4YiI+UFNOOiAxLCAyLCAzLCA0LCA1PC90ZXh0Pgo8dGV4dCB4PSI2MCIgeT0iMjQwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiM2NDc0OGIiPk1TTjogMSwgMSwgMSwgMSwgMTwvdGV4dD4KPCEtLSBOZXR3b3JrIC0tPgo8cmVjdCB4PSIzMDAiIHk9IjUwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZjU5ZTBiIiBzdHJva2Utd2lkdGg9IjIiLz4KPHRleHQgeD0iNDAwIiB5PSI3MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlMmEzYiI+TmV0d29yazwvdGV4dD4KPCEtLSBQYWNrZXQgT3JkZXIgLS0+Cjx0ZXh0IHg9IjMyMCIgeT0iMTIwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM2NDc0OGIiPk9yZGVyZWQ6PC90ZXh0Pgo8dGV4dCB4PSIzMjAiIHk9IjE0MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjNjQ3NDhiIj4xLCAyLCAzLCA0LCA1PC90ZXh0Pgo8dGV4dCB4PSIzMjAiIHk9IjE4MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjNjQ3NDhiIj5PdXQgb2YgT3JkZXI6PC90ZXh0Pgo8dGV4dCB4PSIzMjAiIHk9IjIwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjZWY0NDQ0Ij4xLCAzLCAyLCA1LCA0PC90ZXh0Pgo8IS0tIFJlY2VpdmVyIC0tPgo8cmVjdCB4PSI1NTAiIHk9IjUwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTBiOTgxIiBzdHJva2Utd2lkdGg9IjIiLz4KPHRleHQgeD0iNjUwIiB5PSI3MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlMmEzYiI+UmVjZWl2ZXI8L3RleHQ+CjwhLS0gSW4tUGxhY2UgUmVvcmRlcmluZyAtLT4KPHJlY3QgeD0iNTgwIiB5PSIxMjAiIHdpZHRoPSIxNDAiIGhlaWdodD0iNDAiIGZpbGw9IiNmMGY5ZmYiIHN0cm9rZT0iIzNiODJmNiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjx0ZXh0IHg9IjY1MCIgeT0iMTQ1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5Jbi1QbGFjZSBSZW9yZGVyaW5nPC90ZXh0Pgo8IS0tIEJpdG1hcCBpbiBIb3N0IE1lbW9yeSAtLT4KPHJlY3QgeD0iNTgwIiB5PSIyMDAiIHdpZHRoPSIxNDAiIGhlaWdodD0iNDAiIGZpbGw9IiNmZWYzYzciIHN0cm9rZT0iI2Y1OWUwYiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjx0ZXh0IHg9IjY1MCIgeT0iMjI1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMWUyYTNiIj5CaXRtYXAgaW4gSG9zdDwvdGV4dD4KPCEtLSBBcnJvd3MgLS0+CjxwYXRoIGQ9Ik0yNTAgMjAwIEwyOTUgMjAwIiBzdHJva2U9IiM2NDc0OGIiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIgYXJyb3ctaGVhZD0idHJpYW5nbGUiLz4KPHA+YXRoIGQ9Ik00OTUgMjAwIEw1NTAgMjAwIiBzdHJva2U9IiM2NDc0OGIiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIgYXJyb3ctaGVhZD0idHJpYW5nbGUiLz4KPCEtLSBQcm90b2NvbCBIZWFkZXIgRXh0ZW5zaW9uIC0tPgo8dGV4dCB4PSI1ODAiIHk9IjMwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjNjQ3NDhiIj5Qcm90b2NvbCBIZWFkZXI6PC90ZXh0Pgo8dGV4dCB4PSI1ODAiIHk9IjMyMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjNjQ3NDhiIj5QU04sIE1TTiwgUFNOX09GRlNFVCwgU1NOPC90ZXh0Pgo8IS0tIFNvZnR3YXJlIFJldHJhbnNtaXNzaW9uIC0tPgo8cmVjdCB4PSI1ODAiIHk9IjM2MCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iI2ZkZjJmOCIgc3Ryb2tlPSIjZWM0ODk5IiBzdHJva2Utd2lkdGg9IjIiLz4KPHRleHQgeD0iNjUwIiB5PSIzODUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMxZTJhM2IiPlNvZnR3YXJlPC90ZXh0Pgo8dGV4dCB4PSI2NTAiIHk9IjQwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzFlMmEzYiI+UmV0cmFuc21pc3Npb248L3RleHQ+Cjwvc3ZnPgo="
                                                alt="SRNIC选择重传机制"
                                                style="width: 100%; max-width: 800px; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                        </div>
                                        <p class="diagram-caption">图：SRNIC无内存选择重传机制，展示硬件和软件协同处理</p>
                                    </div>

                                    <div class="repeat-innovations">
                                        <div class="innovation-item">
                                            <h4><i class="fas fa-header"></i> 协议头扩展</h4>
                                            <p>在RDMA协议头中携带PSN、MSN、PSN_OFFSET、SSN等元数据，使接收端能够直接根据头部信息进行数据排序。</p>
                                        </div>
                                        <div class="innovation-item">
                                            <h4><i class="fas fa-arrows-alt"></i> 就地重排</h4>
                                            <p>接收端可直接将数据放入用户缓冲区进行就地重排(in-place reordering)，消除了片上重排缓冲区的需求。</p>
                                        </div>
                                        <div class="innovation-item">
                                            <h4><i class="fas fa-cloud-upload-alt"></i> 位图卸载</h4>
                                            <p>将高内存消耗的位图卸载到主机内存，硬件主要处理顺序数据包，只在丢包时传递元数据给软件处理。</p>
                                        </div>
                                    </div>
                                    <div class="fast-slow-path">
                                        <h4>快慢路径分离</h4>
                                        <div class="path-comparison">
                                            <div class="path-item fast-path">
                                                <h5>快速路径（硬件）</h5>
                                                <ul>
                                                    <li>处理大部分顺序数据包</li>
                                                    <li>通过ePSN和lACK处理</li>
                                                    <li>硬件级别高性能</li>
                                                    <li>低CPU开销</li>
                                                </ul>
                                            </div>
                                            <div class="path-item slow-path">
                                                <h5>慢速路径（软件）</h5>
                                                <ul>
                                                    <li>处理少量乱序数据包</li>
                                                    <li>位图管理和重传控制</li>
                                                    <li>只传输元数据</li>
                                                    <li>开销很低（丢包率低）</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="memory-mgmt" class="tab-panel">
                                    <h3>内存管理优化</h3>
                                    <div class="memory-strategies">
                                        <div class="memory-component">
                                            <h4><i class="fas fa-database"></i> QPC优化策略</h4>
                                            <div class="strategy-details">
                                                <p><strong>压缩存储：</strong>每个QPC压缩至210B，包含必要的DMA状态和连接状态</p>
                                                <p><strong>常驻片上：</strong>为10K个QP分配2.0MB片上内存，确保QPC数据不引发片外访存</p>
                                                <p><strong>状态管理：</strong>包括SQ/RQ地址、读写指针、序列号、拥塞控制参数等关键信息</p>
                                            </div>
                                        </div>
                                        <div class="memory-component">
                                            <h4><i class="fas fa-map"></i> MTT缓存策略</h4>
                                            <div class="strategy-details">
                                                <p><strong>主机存储：</strong>将大型MTT表维护在主机内存中，避免片上内存不足</p>
                                                <p><strong>片上缓存：</strong>实现1.2MB的MTT缓存，利用流量局部性提高性能</p>
                                                <p><strong>大页优化：</strong>支持2MB/1GB大页面减少地址转换表内存大小</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="memory-efficiency">
                                        <h4>内存效率对比</h4>
                                        <div class="efficiency-chart">
                                            <div class="chart-item">
                                                <span class="chart-label">传统RNIC</span>
                                                <div class="chart-bar" style="width: 30%;">
                                                    <span class="chart-value">256 QPs</span>
                                                </div>
                                            </div>
                                            <div class="chart-item">
                                                <span class="chart-label">SRNIC</span>
                                                <div class="chart-bar srnic-bar" style="width: 100%;">
                                                    <span class="chart-value">10K QPs</span>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="efficiency-note">✨ SRNIC在相同内存条件下支持的QP数量提升了<strong>39倍</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="experiments">
                        <h2><i class="fas fa-chart-bar"></i> 实验结果</h2>

                        <div class="experiment-grid">
                            <div class="experiment-card">
                                <h3><i class="fas fa-expand-arrows-alt"></i> 连接可扩展性</h3>
                                <div class="result-highlight">
                                    <span class="result-number">18x</span>
                                    <span class="result-label">归一化可扩展性提升</span>
                                </div>
                                <div class="comparison-data">
                                    <div class="data-row">
                                        <span class="data-label">SRNIC</span>
                                        <span class="data-value success">10,000 QPs 无性能下降</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">Mellanox CX-5</span>
                                        <span class="data-value warning">256 QPs 后性能下降</span>
                                    </div>
                                    <div class="data-row">
                                        <span class="data-label">Mellanox CX-6</span>
                                        <span class="data-value warning">16K QPs 时吞吐量下降46%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="experiment-card">
                                <h3><i class="fas fa-tachometer-alt"></i> 性能指标</h3>
                                <div class="performance-metrics">
                                    <div class="metric-row">
                                        <span class="metric-icon"><i class="fas fa-rocket"></i></span>
                                        <span class="metric-name">吞吐量</span>
                                        <span class="metric-value">97 Gbps</span>
                                        <span class="metric-note">线速性能</span>
                                    </div>
                                    <div class="metric-row">
                                        <span class="metric-icon"><i class="fas fa-clock"></i></span>
                                        <span class="metric-name">延迟</span>
                                        <span class="metric-value">3.3 μs</span>
                                        <span class="metric-note">超低延迟</span>
                                    </div>
                                    <div class="metric-row">
                                        <span class="metric-icon"><i class="fas fa-microchip"></i></span>
                                        <span class="metric-name">CPU开销</span>
                                        <span class="metric-value">&lt; 5%</span>
                                        <span class="metric-note">硬件卸载</span>
                                    </div>
                                </div>
                            </div>

                            <div class="experiment-card">
                                <h3><i class="fas fa-network-wired"></i> 网络可扩展性</h3>
                                <div class="network-results">
                                    <div class="packet-loss-tolerance">
                                        <h4>丢包容忍度</h4>
                                        <div class="tolerance-data">
                                            <div class="tolerance-item">
                                                <span class="loss-rate">1% 丢包率</span>
                                                <span class="performance-impact">SRNIC比Mellanox高3倍有效吞吐量</span>
                                            </div>
                                            <div class="tolerance-item">
                                                <span class="loss-rate">大规模网络</span>
                                                <span class="performance-impact">可预测的性能表现</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="experiment-card">
                                <h3><i class="fas fa-memory"></i> 内存使用</h3>
                                <div class="memory-usage">
                                    <div class="usage-breakdown">
                                        <h4>SRNIC片上内存占用 (4.4MB)</h4>
                                        <div class="usage-chart">
                                            <div class="usage-item" style="--percentage: 52%">
                                                <span class="usage-label">QPC表</span>
                                                <span class="usage-value">2.3MB</span>
                                            </div>
                                            <div class="usage-item" style="--percentage: 27%">
                                                <span class="usage-label">MTT缓存</span>
                                                <span class="usage-value">1.2MB</span>
                                            </div>
                                            <div class="usage-item" style="--percentage: 14%">
                                                <span class="usage-label">接收缓冲区</span>
                                                <span class="usage-value">0.6MB</span>
                                            </div>
                                            <div class="usage-item" style="--percentage: 7%">
                                                <span class="usage-label">SQ调度器</span>
                                                <span class="usage-value">0.3MB</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="understanding">
                        <h2><i class="fas fa-brain"></i> 我的理解</h2>

                        <div class="understanding-content">
                            <div class="insight-box">
                                <h3><i class="fas fa-key"></i> 核心洞察</h3>
                                <p>SRNIC的最大贡献是<strong>重新定义了RDMA
                                        NIC的设计哲学</strong>。传统RNIC试图在片上缓存尽可能多的状态信息，但这种做法在大规模连接下必然失败。SRNIC巧妙地识别出哪些状态必须保留在片上（如QPC），哪些可以卸载到主机内存（如重传位图），并通过协议修改来支持这种分离。
                                </p>

                                <blockquote>
                                    💡 <strong>设计思想转变：</strong>从"缓存一切"到"智能分离" - 这是RDMA架构设计的范式转换
                                </blockquote>
                            </div>

                            <div class="analogy-section">
                                <h3><i class="fas fa-lightbulb"></i> 生动类比</h3>
                                <div class="analogy-card">
                                    <h4>🏢 办公楼管理类比</h4>
                                    <p><strong>传统RNIC</strong>
                                        就像一个小办公室，试图把所有员工的文件都放在办公桌上（片上缓存）。当员工数量增加时，桌面变得拥挤，找文件变得困难，工作效率急剧下降。</p>

                                    <p><strong>SRNIC</strong> 则像一个现代化的智能办公楼：</p>
                                    <ul>
                                        <li>🗂️ <strong>核心文件</strong>（QPC）始终在桌面，确保快速访问</li>
                                        <li>📚 <strong>档案资料</strong>（MTT）存放在智能档案室，按需调取</li>
                                        <li>🗑️ <strong>临时文件</strong>（WQE）用完即丢，不占用桌面空间</li>
                                        <li>🤖 <strong>智能助手</strong>（软件重传模块）处理特殊情况</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="technical-innovation">
                                <h3><i class="fas fa-cogs"></i> 技术创新解析</h3>

                                <div class="innovation-analysis">
                                    <h4>1. 协议与架构协同设计</h4>
                                    <p>SRNIC不是简单的硬件优化，而是<strong>系统性的重新设计</strong>。通过扩展RDMA协议头部来携带重传所需的元数据，使得硬件可以将复杂的重传逻辑卸载到软件，这种协同设计是其成功的关键。
                                    </p>
                                </div>

                                <div class="innovation-analysis">
                                    <h4>2. 快慢路径的巧妙分离</h4>
                                    <p>数据中心网络的<strong>丢包率通常很低</strong>（&lt;0.1%），SRNIC利用这一特点，让硬件专注处理99.9%的正常情况，软件处理0.1%的异常情况。这种设计既保证了性能，又实现了可扩展性。
                                    </p>
                                </div>

                                <div class="innovation-analysis">
                                    <h4>3. 内存管理的精确控制</h4>
                                    <p>SRNIC对每种数据结构都有<strong>精确的内存预算</strong>。210B的QPC、1.2MB的MTT缓存、19.5KB的调度队列，每个数字背后都是深思熟虑的权衡结果。
                                    </p>
                                </div>
                            </div>

                            <div class="limitations-discussion">
                                <h3><i class="fas fa-exclamation-triangle"></i> 局限性讨论</h3>
                                <div class="limitation-items">
                                    <div class="limitation-item">
                                        <h4>🔧 实现复杂性</h4>
                                        <p>SRNIC需要对RDMA协议进行扩展，并且需要软硬件协同开发，实现难度较高，对现有生态系统的兼容性是一个挑战。</p>
                                    </div>
                                    <div class="limitation-item">
                                        <h4>📈 丢包敏感性</h4>
                                        <p>虽然SRNIC在1%丢包率下表现良好，但在更高丢包率的环境下，软件重传模块的开销可能会影响整体性能。</p>
                                    </div>
                                    <div class="limitation-item">
                                        <h4>💰 成本考量</h4>
                                        <p>增加的软件重传模块和协议扩展可能会增加开发和维护成本，需要权衡性能提升与投入成本。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section" id="significance">
                        <h2><i class="fas fa-star"></i> 对可扩展QP的意义</h2>

                        <div class="significance-grid">
                            <div class="significance-card breakthrough">
                                <h3><i class="fas fa-rocket"></i> 突破性进展</h3>
                                <ul>
                                    <li><strong>量级提升：</strong>将单NIC支持的QP数量从数百个提升到数万个，实现了质的飞跃</li>
                                    <li><strong>性能保证：</strong>在大幅提升可扩展性的同时，保持了与商业RNIC相当的性能指标</li>
                                    <li><strong>理论突破：</strong>证明了通过精心的协议和架构协同设计可以根本性地解决可扩展性问题</li>
                                </ul>
                            </div>

                            <div class="significance-card methodology">
                                <h3><i class="fas fa-microscope"></i> 方法论贡献</h3>
                                <ul>
                                    <li><strong>系统性分析：</strong>深入分析了RDMA可扩展性的根本原因，为后续研究提供了清晰的问题定义</li>
                                    <li><strong>设计原则：</strong>提出了可扩展RDMA NIC设计的三个核心原则，成为领域内的指导思想</li>
                                    <li><strong>评估方法：</strong>建立了RDMA可扩展性的评估框架和基准测试方法</li>
                                </ul>
                            </div>

                            <div class="significance-card industry-impact">
                                <h3><i class="fas fa-industry"></i> 产业影响</h3>
                                <ul>
                                    <li><strong>技术路线：</strong>影响了RDMA NIC的发展方向，多家厂商开始采用类似的设计思路</li>
                                    <li><strong>标准推动：</strong>促进了RDMA协议的演进，为新一代标准的制定提供了重要参考</li>
                                    <li><strong>应用使能：</strong>使得大规模分布式应用（如AI训练、存储系统）能够更好地利用RDMA技术</li>
                                </ul>
                            </div>

                            <div class="significance-card future-research">
                                <h3><i class="fas fa-road"></i> 未来研究方向</h3>
                                <ul>
                                    <li><strong>智能调度：</strong>基于AI的QP调度算法，进一步优化资源利用效率</li>
                                    <li><strong>动态适应：</strong>根据网络状况和负载特征动态调整架构参数</li>
                                    <li><strong>异构支持：</strong>支持CPU、GPU、DPU等异构计算环境的统一RDMA架构</li>
                                </ul>
                            </div>
                        </div>

                        <div class="research-timeline">
                            <h3><i class="fas fa-history"></i> 研究发展脉络</h3>
                            <div class="timeline">
                                <div class="timeline-item">
                                    <div class="timeline-year">2018-2020</div>
                                    <div class="timeline-content">
                                        <h4>问题发现阶段</h4>
                                        <p>研究者开始注意到RDMA在大规模部署中的可扩展性问题，主要关注点在软件层面的优化。</p>
                                    </div>
                                </div>
                                <div class="timeline-item current">
                                    <div class="timeline-year">2021-2023</div>
                                    <div class="timeline-content">
                                        <h4>SRNIC突破</h4>
                                        <p>SRNIC提出了硬件架构的根本性重新设计，开创了协议与架构协同优化的新范式。</p>
                                    </div>
                                </div>
                                <div class="timeline-item future">
                                    <div class="timeline-year">2024-2025</div>
                                    <div class="timeline-content">
                                        <h4>产业化应用</h4>
                                        <p>基于SRNIC思想的商业产品开始出现，相关技术逐步在数据中心规模部署。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="paper-navigation">
                        <div class="nav-buttons">
                            <a href="weir-analysis.html" class="nav-btn">
                                <i class="fas fa-chevron-left"></i>
                                <div>
                                    <span class="nav-label">上一篇</span>
                                    <span class="nav-title">Weir中间件</span>
                                </div>
                            </a>
                            <a href="../index.html" class="nav-btn">
                                <i class="fas fa-home"></i>
                                <div>
                                    <span class="nav-label">返回首页</span>
                                    <span class="nav-title">RDMA研究平台</span>
                                </div>
                            </a>
                            <a href="connection-sharing-analysis.html" class="nav-btn">
                                <div>
                                    <span class="nav-label">下一篇</span>
                                    <span class="nav-title">SRM连接共享</span>
                                </div>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 RDMA研究平台. 论文解读仅供学术交流使用。</p>
            </div>
        </div>
    </footer>

    <!-- 论文预览模态框 -->
    <div id="paperPreviewModal" class="preview-modal">
        <div class="preview-modal-content">
            <div class="preview-header">
                <h3>论文原文预览</h3>
                <span class="close-btn" onclick="closePaperPreview()">&times;</span>
            </div>
            <div class="preview-body">
                <div class="preview-info">
                    <h4>SRNIC A Scalable Architecture for RDMA NICs.pdf</h4>
                    <p>SRNIC提出了一种全新的可扩展RDMA NIC架构，通过协议与架构的协同设计，解决了传统RDMA NIC在连接可扩展性方面的根本性瓶颈。该架构在保持商业RDMA
                        NIC高性能和低CPU开销的同时，实现了对大规模有损网络的支持。</p>
                    <div class="preview-actions">
                        <button class="download-btn" onclick="downloadPaper()">
                            <i class="fas fa-download"></i>
                            下载论文
                        </button>
                        <button class="view-full-btn" onclick="viewFullPaper()">
                            <i class="fas fa-external-link-alt"></i>
                            完整阅读
                        </button>
                    </div>
                </div>
                <div class="preview-pdf">
                    <iframe
                        src="../../try/papers/extracted_papers/可扩展相关论文/SRNIC A Scalable Architecture for RDMA NICs.pdf"
                        width="100%" height="500px"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script src="../scripts/main.js"></script>
    <script src="../scripts/paper.js"></script>
    <script>
        function openPaperPreview() {
            document.getElementById('paperPreviewModal').style.display = 'block';
        }

        function closePaperPreview() {
            document.getElementById('paperPreviewModal').style.display = 'none';
        }

        function downloadPaper() {
            const link = document.createElement('a');
            link.href = '../../try/papers/extracted_papers/可扩展相关论文/SRNIC A Scalable Architecture for RDMA NICs.pdf';
            link.download = 'SRNIC A Scalable Architecture for RDMA NICs.pdf';
            link.click();
        }

        function viewFullPaper() {
            window.open('../../try/papers/extracted_papers/可扩展相关论文/SRNIC A Scalable Architecture for RDMA NICs.pdf', '_blank');
        }

        window.onclick = function (event) {
            const modal = document.getElementById('paperPreviewModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>

</html>